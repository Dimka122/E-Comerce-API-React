{'role': 'assistant', 'content': '\nLet me rewrite the Cart file completely to avoid these Grid issues:\n\n<function_calls>\n<full-file-rewrite file_path="online-store-frontend/src/pages/Cart.tsx">\nimport React, { useState, useEffect } from \'react\';\nimport {\n  Container,\n  Typography,\n  Card,\n  CardMedia,\n  CardContent,\n  Button,\n  Box,\n  IconButton,\n  TextField,\n  CircularProgress,\n  Alert,\n  Divider,\n  Paper,\n} from \'@mui/material\';\nimport { useNavigate } from \'react-router-dom\';\nimport {\n  Delete as DeleteIcon,\n  Remove as RemoveIcon,\n  Add as AddIcon,\n  ShoppingCart,\n  ArrowBack,\n} from \'@mui/icons-material\';\nimport { cartApi } from \'../services/api\';\nimport { ShoppingCart as CartType } from \'../types\';\nimport { useAuth } from \'../contexts/AuthContext\';\n\nconst Cart: React.FC = () => {\n  const navigate = useNavigate();\n  const { isAuthenticated } = useAuth();\n  const [cart, setCart] = useState<CartType | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [updating, setUpdating] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate(\'/login\');\n      return;\n    }\n\n    const fetchCart = async () => {\n      try {\n        const cartData = await cartApi.getCart();\n        setCart(cartData);\n      } catch (err) {\n        setError(\'Не удалось загрузить корзину\');\n        console.error(\'Error fetching cart:\', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCart();\n  }, [isAuthenticated, navigate]);\n\n  const handleUpdateQuantity = async (itemId: number, newQuantity: number) => {\n    if (newQuantity < 1) return;\n\n    try {\n      setUpdating(itemId);\n      await cartApi.updateCartItem(itemId, newQuantity);\n      \n      // Refresh cart\n      const updatedCart = await cartApi.getCart();\n      setCart(updatedCart);\n    } catch (error) {\n      console.error(\'Error updating cart item:\', error);\n    } finally {\n      setUpdating(null);\n    }\n  };\n\n  const handleRemoveItem = async (itemId: number) => {\n    try {\n      await cartApi.removeFromCart(itemId);\n      \n      // Refresh cart\n      const updatedCart = await cartApi.getCart();\n      setCart(updatedCart);\n    } catch (error) {\n      console.error(\'Error removing cart item:\', error);\n    }\n  };\n\n  const handleClearCart = async () => {\n    try {\n      await cartApi.clearCart();\n      setCart(null);\n    } catch (error) {\n      console.error(\'Error clearing cart:\', error);\n    }\n  };\n\n  const formatPrice = (price: number, salePrice?: number) => {\n    if (salePrice && salePrice < price) {\n      return (\n        <Box>\n          <Typography variant="body2" color="text.secondary" sx={{ textDecoration: \'line-through\' }}>\n            ${price.toFixed(2)}\n          </Typography>\n          <Typography variant="h6" color="error">\n            ${salePrice.toFixed(2)}\n          </Typography>\n        </Box>\n      );\n    }\n    return <Typography variant="h6">${price.toFixed(2)}</Typography>;\n  };\n\n  if (loading) {\n    return (\n      <Container maxWidth="lg" sx={{ mt: 4, textAlign: \'center\' }}>\n        <CircularProgress />\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container maxWidth="lg" sx={{ mt: 4 }}>\n        <Alert severity="error">{error}</Alert>\n      </Container>\n    );\n  }\n\n  if (!cart || cart.items.length === 0) {\n    return (\n      <Container maxWidth="lg" sx={{ mt: 4 }}>\n        <Paper sx={{ p: 4, textAlign: \'center\' }}>\n          <ShoppingCart sx={{ fontSize: 64, color: \'text.secondary\', mb: 2 }} />\n          <Typography variant="h5" gutterBottom>\n            Ваша корзина пуста\n          </Typography>\n          <Typography color="text.secondary" sx={{ mb: 3 }}>\n            Добавьте товары в корзину, чтобы продолжить покупки\n          </Typography>\n          <Button\n            variant="contained"\n            size="large"\n            onClick={() => navigate(\'/products\')}\n          >\n            Перейти к товарам\n          </Button>\n        </Paper>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth="lg">\n      <Box sx={{ mb: 3, display: \'flex\', alignItems: \'center\', gap: 2 }}>\n        <Button\n          startIcon={<ArrowBack />}\n          onClick={() => navigate(-1)}\n        >\n          Назад\n        </Button>\n        <Typography variant="h4" component="h1">\n          Корзина\n        </Typography>\n      </Box>\n\n      <Box sx={{ display: \'flex\', gap: 4, flexWrap: \'wrap\' }}>\n        {/* Cart Items */}\n        <Box sx={{ flex: 2, minWidth: 300 }}>\n          {cart.items.map((item) => (\n            <Card key={item.id} sx={{ mb: 2 }}>\n              <CardContent>\n                <Box sx={{ display: \'flex\', gap: 2, alignItems: \'center\', flexWrap: \'wrap\' }}>\n                  <Box sx={{ flex: \'0 0 100px\' }}>\n                    <CardMedia\n                      component="img"\n                      image={item.product.imageUrl || `https://picsum.photos/seed/${item.product.id}/100/100.jpg`}\n                      alt={item.product.name}\n                      sx={{ height: 100, objectFit: \'cover\', borderRadius: 1 }}\n                    />\n                  </Box>\n                  \n                  <Box sx={{ flex: 1, minWidth: 200 }}>\n                    <Typography variant="h6" sx={{ cursor: \'pointer\' }}\n                      onClick={() => navigate(`/products/${item.product.id}`)}\n                    >\n                      {item.product.name}\n                    </Typography>\n                    <Typography variant="body2" color="text.secondary">\n                      {item.product.category.name}\n                    </Typography>\n                  </Box>\n\n                  <Box sx={{ flex: \'0 0 150px\' }}>\n                    <Box sx={{ display: \'flex\', alignItems: \'center\', gap: 1 }}>\n                      <IconButton\n                        size="small"\n                        onClick={() => handleUpdateQuantity(item.id, item.quantity - 1)}\n                        disabled={updating === item.id || item.quantity <= 1}\n                      >\n                        <RemoveIcon />\n                      </IconButton>\n                      <TextField\n                        type="number"\n                        value={item.quantity}\n                        onChange={(e) => {\n                          const newQty = parseInt(e.target.value) || 1;\n                          handleUpdateQuantity(item.id, newQty);\n                        }}\n                        inputProps={{ min: 1, max: item.product.stockQuantity }}\n                        sx={{ width: 60 }}\n                        size="small"\n                      />\n                      <IconButton\n                        size="small"\n                        onClick={() => handleUpdateQuantity(item.id, item.quantity + 1)}\n                        disabled={updating === item.id || item.quantity >= item.product.stockQuantity}\n                      >\n                        <AddIcon />\n                      </IconButton>\n                    </Box>\n                  </Box>\n\n                  <Box sx={{ flex: \'0 0 120px\', textAlign: \'right\' }}>\n                    {formatPrice(item.price, item.product.salePrice)}\n                    <Typography variant="body2" color="text.secondary">\n                      Итого: ${(item.price * item.quantity).toFixed(2)}\n                    </Typography>\n                  </Box>\n\n                  <Box sx={{ flex: \'0 0 auto\' }}>\n                    <IconButton\n                      color="error"\n                      onClick={() => handleRemoveItem(item.id)}\n                    >\n                      <DeleteIcon />\n                    </IconButton>\n                  </Box>\n                </Box>\n              </CardContent>\n            </Card>\n          ))}\n\n          <Box sx={{ mt: 2 }}>\n            <Button\n              variant="outlined"\n              color="error"\n              onClick={handleClearCart}\n            >\n              Очистить корзину\n            </Button>\n          </Box>\n        </Box>\n\n        {/* Order Summary */}\n        <Paper sx={{ p: 3, flex: 1, minWidth: 300 }}>\n          <Typography variant="h6" gutterBottom>\n            Итого\n          </Typography>\n          \n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: \'flex\', justifyContent: \'space-between\', mb: 1 }}>\n              <Typography>Товары ({cart.items.length}):</Typography>\n              <Typography>${cart.totalAmount.toFixed(2)}</Typography>\n            </Box>\n            <Divider sx={{ my: 1 }} />\n            <Box sx={{ display: \'flex\', justifyContent: \'space-between\' }}>\n              <Typography variant="h6">Общая сумма:</Typography>\n              <Typography variant="h6" color="primary">\n                ${cart.totalAmount.toFixed(2)}\n              </Typography>\n            </Box>\n          </Box>\n\n          <Button\n            variant="contained"\n            size="large"\n            fullWidth\n            onClick={() => navigate(\'/checkout\')}\n          >\n            Оформить заказ\n          </Button>\n\n          <Button\n            variant="text"\n            fullWidth\n            sx={{ mt: 2 }}\n            onClick={() => navigate(\'/products\')}\n          >\n            Продолжить покупки\n          </Button>\n        </Paper>\n      </Box>\n    </Container>\n  );\n};\n\nexport default Cart;\n</full-file-rewrite>\n</function_calls>'}