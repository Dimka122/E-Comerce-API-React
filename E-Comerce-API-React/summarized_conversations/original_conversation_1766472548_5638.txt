{'role': 'assistant', 'content': '\nNow let me create the Profile page:\n\n<function_calls>\n<create-file file_path="online-store-frontend/src/pages/Profile.tsx">\nimport React, { useState, useEffect } from \'react\';\nimport {\n  Container,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  Box,\n  Alert,\n  CircularProgress,\n  Grid,\n  Avatar,\n  Divider,\n} from \'@mui/material\';\nimport { Person } from \'@mui/icons-material\';\nimport { useAuth } from \'../contexts/AuthContext\';\n\nconst Profile: React.FC = () => {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  const [formData, setFormData] = useState({\n    firstName: \'\',\n    lastName: \'\',\n    email: \'\',\n    currentPassword: \'\',\n    newPassword: \'\',\n    confirmPassword: \'\',\n  });\n\n  useEffect(() => {\n    if (user) {\n      setFormData(prev => ({\n        ...prev,\n        firstName: user.firstName || \'\',\n        lastName: user.lastName || \'\',\n        email: user.email || \'\',\n      }));\n    }\n  }, [user]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleUpdateProfile = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.firstName || !formData.lastName) {\n      setError(\'Пожалуйста, заполните все обязательные поля\');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      setSuccess(null);\n      \n      // TODO: Implement profile update API call\n      // await authApi.updateProfile({\n      //   firstName: formData.firstName,\n      //   lastName: formData.lastName,\n      // });\n      \n      setSuccess(\'Профиль успешно обновлен\');\n    } catch (err: any) {\n      setError(err.response?.data?.message || \'Ошибка обновления профиля\');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChangePassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.currentPassword || !formData.newPassword) {\n      setError(\'Пожалуйста, заполните все поля пароля\');\n      return;\n    }\n\n    if (formData.newPassword !== formData.confirmPassword) {\n      setError(\'Новые пароли не совпадают\');\n      return;\n    }\n\n    if (formData.newPassword.length < 6) {\n      setError(\'Новый пароль должен содержать минимум 6 символов\');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      setSuccess(null);\n      \n      // TODO: Implement password change API call\n      // await authApi.changePassword({\n      //   currentPassword: formData.currentPassword,\n      //   newPassword: formData.newPassword,\n      // });\n      \n      setSuccess(\'Пароль успешно изменен\');\n      setFormData(prev => ({\n        ...prev,\n        currentPassword: \'\',\n        newPassword: \'\',\n        confirmPassword: \'\',\n      }));\n    } catch (err: any) {\n      setError(err.response?.data?.message || \'Ошибка изменения пароля\');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!user) {\n    return (\n      <Container maxWidth="md">\n        <Box sx={{ mt: 8, textAlign: \'center\' }}>\n          <CircularProgress />\n        </Box>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth="md">\n      <Box sx={{ mt: 4, mb: 4 }}>\n        <Typography variant="h4" component="h1" gutterBottom>\n          Мой профиль\n        </Typography>\n\n        {error && (\n          <Alert severity="error" sx={{ mb: 3 }}>\n            {error}\n          </Alert>\n        )}\n\n        {success && (\n          <Alert severity="success" sx={{ mb: 3 }}>\n            {success}\n          </Alert>\n        )}\n\n        <Grid container spacing={4}>\n          {/* Profile Information */}\n          <Grid item xs={12} md={6}>\n            <Paper sx={{ p: 4 }}>\n              <Box sx={{ display: \'flex\', alignItems: \'center\', mb: 3 }}>\n                <Avatar sx={{ width: 64, height: 64, mr: 2, bgcolor: \'primary.main\' }}>\n                  <Person sx={{ fontSize: 32 }} />\n                </Avatar>\n                <Box>\n                  <Typography variant="h6">\n                    {user.firstName} {user.lastName}\n                  </Typography>\n                  <Typography color="text.secondary">\n                    {user.email}\n                  </Typography>\n                </Box>\n              </Box>\n\n              <Divider sx={{ mb: 3 }} />\n\n              <Typography variant="h6" gutterBottom>\n                Личная информация\n              </Typography>\n\n              <Box component="form" onSubmit={handleUpdateProfile}>\n                <TextField\n                  fullWidth\n                  label="Имя"\n                  name="firstName"\n                  value={formData.firstName}\n                  onChange={handleChange}\n                  required\n                  sx={{ mb: 2 }}\n                />\n\n                <TextField\n                  fullWidth\n                  label="Фамилия"\n                  name="lastName"\n                  value={formData.lastName}\n                  onChange={handleChange}\n                  required\n                  sx={{ mb: 2 }}\n                />\n\n                <TextField\n                  fullWidth\n                  label="Email"\n                  name="email"\n                  type="email"\n                  value={formData.email}\n                  onChange={handleChange}\n                  disabled\n                  sx={{ mb: 3 }}\n                  helperText="Email нельзя изменить"\n                />\n\n                <Button\n                  type="submit"\n                  variant="contained"\n                  disabled={loading}\n                  sx={{ mb: 2 }}\n                >\n                  {loading ? <CircularProgress size={20} /> : \'Сохранить изменения\'}\n                </Button>\n              </Box>\n            </Paper>\n          </Grid>\n\n          {/* Change Password */}\n          <Grid item xs={12} md={6}>\n            <Paper sx={{ p: 4 }}>\n              <Typography variant="h6" gutterBottom>\n                Изменить пароль\n              </Typography>\n\n              <Box component="form" onSubmit={handleChangePassword}>\n                <TextField\n                  fullWidth\n                  label="Текущий пароль"\n                  name="currentPassword"\n                  type="password"\n                  value={formData.currentPassword}\n                  onChange={handleChange}\n                  required\n                  sx={{ mb: 2 }}\n                />\n\n                <TextField\n                  fullWidth\n                  label="Новый пароль"\n                  name="newPassword"\n                  type="password"\n                  value={formData.newPassword}\n                  onChange={handleChange}\n                  required\n                  sx={{ mb: 2 }}\n                />\n\n                <TextField\n                  fullWidth\n                  label="Подтвердите новый пароль"\n                  name="confirmPassword"\n                  type="password"\n                  value={formData.confirmPassword}\n                  onChange={handleChange}\n                  required\n                  sx={{ mb: 3 }}\n                />\n\n                <Button\n                  type="submit"\n                  variant="contained"\n                  color="secondary"\n                  disabled={loading}\n                >\n                  {loading ? <CircularProgress size={20} /> : \'Изменить пароль\'}\n                </Button>\n              </Box>\n            </Paper>\n          </Grid>\n        </Grid>\n      </Box>\n    </Container>\n  );\n};\n\nexport default Profile;\n</create-file>\n</function_calls>'}