{'role': 'assistant', 'content': '\nLet me also fix the ProductDetail page:\n\n<function_calls>\n<str-replace file_path="online-store-frontend/src/pages/ProductDetail.tsx">\n  <old_str>      <Grid container spacing={4}>\n        {/* Product Image */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardMedia\n              component="img"\n              image={product.imageUrl || `https://picsum.photos/seed/${product.id}/600/600.jpg`}\n              alt={product.name}\n              sx={{ height: 600, objectFit: \'cover\' }}\n            />\n          </Card>\n        </Grid>\n\n        {/* Product Info */}\n        <Grid item xs={12} md={6}>\n          <Typography variant="h4" component="h1" gutterBottom>\n            {product.name}\n          </Typography>\n\n          <Box sx={{ mb: 2 }}>\n            <Rating value={product.averageRating} precision={0.1} readOnly />\n            <Typography variant="body2" color="text.secondary" sx={{ ml: 1 }}>\n              ({product.reviews.length} отзывов)\n            </Typography>\n          </Box>\n\n          {formatPrice(product.price, product.salePrice)}\n\n          <Typography variant="body1" sx={{ my: 3 }}>\n            {product.description}\n          </Typography>\n\n          <Box sx={{ mb: 3 }}>\n            <Typography variant="body2" color="text.secondary">\n              Категория: {product.category.name}\n            </Typography>\n            <Typography variant="body2" color="text.secondary">\n              В наличии: {product.stockQuantity} шт.\n            </Typography>\n            {product.isFeatured && (\n              <Chip label="Рекомендуемый" color="primary" size="small" sx={{ mt: 1 }} />\n            )}\n          </Box>\n\n          {/* Quantity and Add to Cart */}\n          <Box sx={{ mb: 4 }}>\n            <Typography variant="h6" gutterBottom>\n              Количество:\n            </Typography>\n            <Box sx={{ display: \'flex\', alignItems: \'center\', gap: 2 }}>\n              <TextField\n                type="number"\n                value={quantity}\n                onChange={(e) => setQuantity(Math.max(1, parseInt(e.target.value) || 1))}\n                inputProps={{ min: 1, max: product.stockQuantity }}\n                sx={{ width: 100 }}\n              />\n              <Button\n                variant="contained"\n                size="large"\n                startIcon={<ShoppingCart />}\n                onClick={handleAddToCart}\n                disabled={addingToCart || product.stockQuantity === 0}\n              >\n                {addingToCart ? \'Добавление...\' : \'В корзину\'}\n              </Button>\n            </Box>\n            {product.stockQuantity === 0 && (\n              <Typography color="error" sx={{ mt: 1 }}>\n                Товар временно отсутствует\n              </Typography>\n            )}\n          </Box>\n        </Grid>\n      </Grid></old_str>\n  <new_str>      <Box sx={{ display: \'flex\', gap: 4, flexWrap: \'wrap\' }}>\n        {/* Product Image */}\n        <Box sx={{ flex: 1, minWidth: 300 }}>\n          <Card>\n            <CardMedia\n              component="img"\n              image={product.imageUrl || `https://picsum.photos/seed/${product.id}/600/600.jpg`}\n              alt={product.name}\n              sx={{ height: 600, objectFit: \'cover\' }}\n            />\n          </Card>\n        </Box>\n\n        {/* Product Info */}\n        <Box sx={{ flex: 1, minWidth: 300 }}>\n          <Typography variant="h4" component="h1" gutterBottom>\n            {product.name}\n          </Typography>\n\n          <Box sx={{ mb: 2 }}>\n            <Rating value={product.averageRating} precision={0.1} readOnly />\n            <Typography variant="body2" color="text.secondary" sx={{ ml: 1 }}>\n              ({product.reviews.length} отзывов)\n            </Typography>\n          </Box>\n\n          {formatPrice(product.price, product.salePrice)}\n\n          <Typography variant="body1" sx={{ my: 3 }}>\n            {product.description}\n          </Typography>\n\n          <Box sx={{ mb: 3 }}>\n            <Typography variant="body2" color="text.secondary">\n              Категория: {product.category.name}\n            </Typography>\n            <Typography variant="body2" color="text.secondary">\n              В наличии: {product.stockQuantity} шт.\n            </Typography>\n            {product.isFeatured && (\n              <Chip label="Рекомендуемый" color="primary" size="small" sx={{ mt: 1 }} />\n            )}\n          </Box>\n\n          {/* Quantity and Add to Cart */}\n          <Box sx={{ mb: 4 }}>\n            <Typography variant="h6" gutterBottom>\n              Количество:\n            </Typography>\n            <Box sx={{ display: \'flex\', alignItems: \'center\', gap: 2 }}>\n              <TextField\n                type="number"\n                value={quantity}\n                onChange={(e) => setQuantity(Math.max(1, parseInt(e.target.value) || 1))}\n                inputProps={{ min: 1, max: product.stockQuantity }}\n                sx={{ width: 100 }}\n              />\n              <Button\n                variant="contained"\n                size="large"\n                startIcon={<ShoppingCart />}\n                onClick={handleAddToCart}\n                disabled={addingToCart || product.stockQuantity === 0}\n              >\n                {addingToCart ? \'Добавление...\' : \'В корзину\'}\n              </Button>\n            </Box>\n            {product.stockQuantity === 0 && (\n              <Typography color="error" sx={{ mt: 1 }}>\n                Товар временно отсутствует\n              </Typography>\n            )}\n          </Box>\n        </Box>\n      </Box></new_str>\n</str-replace>\n</function_calls>'}